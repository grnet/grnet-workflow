<md-toolbar>
	<div class="md-toolbar-tools">

		<md-button id="menu-button" class="md-icon-button" aria-label="Menu" ng-click="toggle()" hide-gt-md>
			<md-icon md-svg-icon="img/icons/menu.svg"></md-icon>
		</md-button>

		<md-icon md-svg-icon="img/icons/wf-logo.svg" style="height: 48px; width: 48px"></md-icon>

		<div hide-sm layout-padding class="non-printing-heading">
			<h1 class="md-title application-title">workflow::manager</h1>
			<h2 class="md-subhead page-title">{{'processesHistory' | translate }}</h2>
		</div>

		<div class="print-heading">
			<h1 class="md-title application-title">Grnet Workflow</h1>
			<h2 class="md-subhead page-title">{{'processesHistory' | translate }}</h2>
		</div>

		<span flex></span>

		<md-button class="md-icon-button" aria-label="Print" ng-click="print()" ng-if="endedInstances.length > 0">
			<md-icon md-svg-icon="img/icons/print.svg"></md-icon>
		</md-button>

		<md-button class="md-icon-button" aria-label="Filter" ng-click="filteringOptions($event)" hide-gt-md>
			<md-icon md-svg-icon="img/icons/filter.svg"></md-icon>
		</md-button>

	</div>
</md-toolbar>

<section layout="row" class="main-section">

	<!-- Filtering options -->
	<div layout="column" flex="30" hide show-gt-md>
		<md-card>

			<md-subheader class="md-primary">{{ 'searchCompleteInstances' | translate }}</md-subheader>

			<md-divider style="padding-top:10px"></md-divider>

			<md-card-content>

				<section layout="row" class="md-block">

					<label for="date-after" flex="35" class="wf-label">{{ 'completedAfter' | translate }}</label>
					<md-datepicker id="date-after" ng-model="searchFilter.dateAfter" md-placeholder="{{ 'date' | translate }}" ng-change="searchInstances()" style="margin-right: 0px;" md-max-date="nextDay"></md-datepicker>

					<md-button class="md-icon-button" aria-label="Clear" ng-click="clearDateAfter()">
						<md-icon md-svg-icon="img/icons/clear.svg" style="margin-left: 8px;color: red;"></md-icon>
					</md-button>

				</section>

				<section layout="row" class="md-block">

					<label flex="35" class="wf-label">{{ 'completedBefore' | translate }}</label>
					<md-datepicker ng-model="searchFilter.dateBefore" md-placeholder="{{ 'date' | translate }}" ng-change="searchInstances()" style="margin-right: 0px;" md-max-date="nextDay"></md-datepicker>

					<md-button class="md-icon-button" aria-label="Clear" ng-click="clearDateBefore()">
						<md-icon md-svg-icon="img/icons/clear.svg" style="margin-left: 8px;color: red;"></md-icon>
					</md-button>

				</section>

				<md-input-container class="md-block wf-with-confirm">
					<label for="workflowInstances">{{ 'executionName' | translate }}</label>

					<md-button ng-click="searchInstances()" class="md-icon-button wf-confirm-button" style="display: inline-block; position: absolute; top: 0; right: 10px"
					 aria-label="Search">
						<md-icon md-svg-icon="img/icons/check.svg" style="color:green"></md-icon>
					</md-button>

					<md-button class="md-icon-button wf-confirm-button" aria-label="Clear" ng-click="clearInstanceTitle()" style="display: inline-block; position: absolute; top: 0; right: -20px">
						<md-icon md-svg-icon="img/icons/clear.svg" style="margin-left: 8px;color: red;"></md-icon>
					</md-button>

					<input ng-model="searchFilter.instanceTitle" style="max-width: 300px">
				</md-input-container>

			</md-card-content>
		</md-card>
	</div>

	<md-content flex class="transparent">

		<div layout="row" layout-align="center start" flex class="warning-message" ng-if="endedInstances === null || endedInstances.length == 0">
			<md-card style="margin-left: 8px;">
				<md-card-content layout-align="center center">
					<md-icon md-svg-icon="img/icons/info.svg"></md-icon>
					<span>{{'noInstancesForProcess' | translate }}</span>
				</md-card-content>
			</md-card>
		</div>

		<div class="criteria-printing-container">
			<p>{{"completedAfter" | translate}}: {{searchFilter.dateAfter | date:'yyyy-MM-dd'}}</p>
			<p>{{"completedBefore" | translate}}: {{searchFilter.dateBefore | date:'yyyy-MM-dd'}}</p>
			<p ng-if="searchFilter.instanceTitle">{{ 'executionName' | translate }}: {{ searchFilter.instanceTitle }}</p>
		</div>

		<div class="printing-divider"></div>

		<md-list flex style="padding-top: 0px;">
			<md-card ng-repeat="instance in endedInstances" style="margin-left:0px">
				<md-list-item class="md-2-line" ng-click="goTo('/history/' + instance.id)">
					<img ng-src="{{imagePath + instance.definitionIcon}}" class="md-avatar" alt="{{instance.title}}" />
					<div class="md-list-item-text" layout="column">
						<h3>{{instance.title}}</h3>
						<p ng-if="instance.supervisor">{{'supervisor' | translate }} : {{instance.supervisor}}</p>
					</div>
				</md-list-item>
			</md-card>
		</md-list>

	</md-content>
</section>